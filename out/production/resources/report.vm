<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="UTF-8"></meta>
    <title>Test Report</title>
    <script src="js/jquery-3.5.1/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
    <script src="js/bootstrap-4.5.0-dist/js/bootstrap.min.js"></script>
    <script src="js/echarts/echarts.min.js"></script>
    <link rel="stylesheet" href="js/bootstrap-4.5.0-dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="js/bootstrap-table-dist/bootstrap-table.css"/>
##    <style>
##        table, table tr th, table tr td {
##            border: 1px solid #0094ff;
##        }
##        table thead td{
##            font-family: "Arial";
##            font-size:100%;
##            color:black;
##            font-weight:bold;
##        }
##        table.success tbody tr td{
##            color: green;
##        }
##        table {
##            width: 80%;
##            min-height: 25px;
##            line-height: 25px;
##            text-align: center;
##            border-collapse: collapse;
##            margin-left: 50px;
##        }
##        div{
##            margin-left: 20px;
##        }
##    </style>
    <style>
        p{
            color: #856404;
        }

    </style>

</head>
<body>
<div class="container">
    <div class="card">
        <div class="card-header"><h2>Summary</h2></div>
        <div id="allSuites" class="card-body">
            <table class="table">
                <thead>
                <tr>
                    <th>Total cases</th>
                    <th>Passed cases</th>
                    <th>Failed cases</th>
                    <th>Skipped cases</th>
                    <th>Duration(s)</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>$allSuites.getTotalNumber()</td>
                    <td>$allSuites.getPassedNumber()</td>
                    <td>$allSuites.getFailedNumber()</td>
                    <td>$allSuites.getSkippedNumber()</td>
                    <td>$allSuites.getDuration()</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
        <div class="card">
           <div class="card-header"><h2>Suite statitics</h2></div>
            <div id="suiteBox" style="width: 600px;height:400px;" class="card-body"></div>
            <script type="text/javascript">
                var myChart = echarts.init(document.getElementById('suiteBox'));
                myChart.setOption({
                    color: ['#1c7430', '#a71d2a', '#856404'],
                    // 设置图表的位置
                    // grid: {
                    //     x: 60, // 左间距
                    //     y: 80, // 上间距
                    //     x2: 60, // 右间距
                    //     y2: 40, // 下间距
                    //     containLabel: true // grid 区域是否包含坐标轴的刻度标签, 常用于『防止标签溢出』的场景
                    // },
                    // 提示框组件
                    tooltip: {
                        trigger: 'axis', // 触发类型, axis: 坐标轴触发
                        axisPointer: {
                            // 指示器类型  'line' 直线指示器 'shadow' 阴影指示器 'none' 无指示器
                            // 'cross' 十字准星指示器 其实是种简写，表示启用两个正交的轴的 axisPointer
                            type: 'none'
                        },
                        textStyle: {
                            color: '#cdd3ee' // 文字颜色
                        },
                        // 提示框浮层内容格式器，支持字符串模板和回调函数两种形式 折线（区域）图、柱状（条形）图、K线图
                        // {a}（系列名称），{b}（类目值），{c}（数值）, {d}（无）
                        formatter: '{b}<br />{a0}: {c0}%<br />{a1}: {c1}%<br />{a2}: {c2}%'
                    },
                    // 图例组件
                    legend: {
                        textStyle: {
                            fontSize: 16,
                            color: '#cdd3ee'
                        },
                        // top: 13, // 定位
                        data: [ 'passed', 'failed', 'skipped' ]
                    },
                    xAxis: {
                        type: 'value', // 坐标轴类型,   'value' 数值轴，适用于连续数据
                        // 坐标轴刻度
                        axisTick: {
                            show: false // 是否显示坐标轴刻度 默认显示
                        },
                        // 坐标轴轴线
                        axisLine: { // 是否显示坐标轴轴线 默认显示
                            show: false // 是否显示坐标轴轴线 默认显示
                        },
                        // 坐标轴在图表区域中的分隔线
                        splitLine: {
                            show: false // 是否显示分隔线。默认数值轴显示
                        },
                        // 坐标轴刻度标签
                        axisLabel: {
                            show: false // 是否显示刻度标签 默认显示
                        }
                    },
                    yAxis: [
                        // 左侧Y轴
                        {
                            // 坐标轴类型,  'category' 类目轴，适用于离散的类目数据
                            // 为该类型时必须通过 data 设置类目数据
                            type: 'category',
                            // 坐标轴刻度
                            axisTick: {
                                show: false // 是否显示坐标轴刻度 默认显示
                            },
                            // 坐标轴轴线
                            axisLine: { // 是否显示坐标轴轴线 默认显示
                                show: false, // 是否显示坐标轴轴线 默认显示
                                lineStyle: { // 坐标轴线线的颜色
                                    color: '#cdd3ee'
                                }
                            },
                            // 坐标轴在图表区域中的分隔线
                            splitLine: {
                                show: false // 是否显示分隔线。默认数值轴显示
                            },
                            // 坐标轴刻度标签
                            axisLabel: {
                                show: true, // 是否显示刻度标签 默认显示
                                fontSize: 16, // 文字的字体大小
                                color: '#cdd3ee', // 刻度标签文字的颜色
                                // 使用字符串模板，模板变量为刻度默认标签 {value}
                                formatter: '{value}'
                            },
                            // 类目数据，在类目轴（type: 'category'）中有效

                            data: [
                                #foreach ($testRun in $suite.getTestRunResults())
                                    '$testRun.getName()',
                                #end]
                        }
                    ],
                    // 系列列表
                    series: [
                        {
                            type: 'bar', // 系列类型
                            name: 'passed', // 系列名称, 用于tooltip的显示, legend 的图例筛选
                            // 数据堆叠，同个类目轴上系列配置相同的stack值后，后一个系列的值会在前一个系列的值上相加
                            stack: '总量',
                            barMaxWidth: 20, // 柱条的最大宽度，不设时自适应
                            // 图形上的文本标签
                            label: {
                                show: true,
                                // 标签的位置 left right bottom top inside  // 绝对的像素值 position: [10, 10]
                                // 相对的百分比 position: ['50%', '50%']
                                position: 'top'
                            },
                            // 图形样式
                            itemStyle: {
                                barBorderRadius: [10, 0, 0, 10] // 圆角半径, 单位px, 支持传入数组分别指定 4 个圆角半径
                            },
                            data: [
                                #foreach ($suite in $suiteList)
                                    '$suite.getPassedNumber()',
                                #end
                            ] // 系列中的数据内容数组

                        },
                        {
                            type: 'bar', // 系列类型
                            name: 'failed', // 系列名称, 用于tooltip的显示, legend 的图例筛选
                            // 数据堆叠，同个类目轴上系列配置相同的stack值后，后一个系列的值会在前一个系列的值上相加
                            stack: '总量',
                            barMaxWidth: 20, // 柱条的最大宽度，不设时自适应
                            // 图形上的文本标签
                            label: {
                                show: true,
                                // 标签的位置 left right bottom top inside  // 绝对的像素值 position: [10, 10]
                                // 相对的百分比 position: ['50%', '50%']
                                position: 'inside'
                            },
                            data: [
                                #foreach ($suite in $suiteList)
                                    '$suite.getFailedNumber()',
                                #end
                            ] // 系列中的数据内容数组
                        },
                        {
                            type: 'bar', // 系列类型
                            name: 'skipped', // 系列名称, 用于tooltip的显示, legend 的图例筛选
                            // 数据堆叠，同个类目轴上系列配置相同的stack值后，后一个系列的值会在前一个系列的值上相加
                            stack: '总量',
                            barMaxWidth: 20, // 柱条的最大宽度，不设时自适应
                            // 图形上的文本标签
                            label: {
                                show: true,
                                // 标签的位置 left right bottom top inside  // 绝对的像素值 position: [10, 10]
                                // 相对的百分比 position: ['50%', '50%']
                                position: 'inside'
                            },
                            // 图形样式
                            itemStyle: {
                                barBorderRadius: [0, 10, 10, 0] // 圆角半径, 单位px, 支持传入数组分别指定 4 个圆角半径
                            },
                            data: [
                                #foreach ($suite in $suiteList)
                                    '$suite.getSkippedNumber()',
                                #end
                            ] // 系列中的数据内容数组
                        }
                    ]
                })
            </script>
        </div>

        <div class="accordion" id="caseDetails">
                <div class="card">
                    <div class="card-header">
                        <a class="card-link" data-toggle="collapse" href="#passedCases">
                            <h2>Passed Cases</h2>
                        </a>
                    </div>
                    <div id="passedCases" class="collapse show">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table  table-hover">
                                    <thead class= "thead-light">
                                    <tr>
                                        <th width="20%">Suite</th>
                                        <th width="20%">Case</th>
                                        <th width="20%">Parameters</th>
                                        <th width="10%">Status</th>
                                        ##                                    <th width="20%">Start</th>
                                        ##                                    <th width="20%">End</th>
                                        <th width="10%">Duration</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                        #foreach ($suite in $suiteList)
                                            #foreach($testRun in $suite.getTestRunResults())
                                                #foreach($test in $testRun.getPassedTests())
                                                <tr>
                                                    <td align="left">$suite.getSuiteName()</td>
                                                    <td align="left">$test.getName()</td>
                                                    <td align="left">$test.getParameters()</td>
                                                    <td><span class="badge badge-success">$test.getStatus()</span></td>
                                                    ##                                        <td>$test.getStarttimeString()</td>
                                                    ##                                        <td>$test.getEndtimeString()</td>
                                                    <td>$test.getDuration()</td>
                                                </tr>
                                                #end
                                            #end
                                        #end
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <a class="card-link" data-toggle="collapse" href="#failedCases">
                                <h2>Failed Cases</h2>
                            </a>
                        </div>
                    <div id="failedCases" class="collapse show">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table  table-hover">
                                    <thead class= "thead-light">
                                    <tr>
                                        <th width="20%">Suite</th>
                                        <th width="20%">Case</th>
                                        <th width="15%">Parameters</th>
                                        <th width="5%">Status</th>
                                        <th width="5%">Duration</th>
                                        <th width="35%">Exception</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                        #foreach ($suite in $suiteList)
                                            #foreach($testRun in $suite.getTestRunResults())
                                                #foreach($test in $testRun.getFailedTests())
                                                <tr>
                                                    <td align="left">$suite.getSuiteName()</td>
                                                    <td align="left">$test.getName()</td>
                                                    <td align="left">$test.getParameters()</td>
                                                    <td><span class="badge badge-danger">$test.getStatus()</span></td>
                                                    <td>$test.getDuration()</td>
                                                    <td align="left">$test.getStackTrace()
                                                    </td>
                                                </tr>
                                                #end
                                            #end
                                        #end
                                    </tbody>
                                </table>
                                <script>
                                    $(document).ready(function(){
                                        $('[data-toggle="popover"]').popover();
                                    });
                                </script>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
        </div>
</div>


</body>
</html>
